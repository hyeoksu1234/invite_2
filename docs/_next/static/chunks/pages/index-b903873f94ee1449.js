(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1854)}])},8199:function(e,t){"use strict";var n,r,l,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ACTION_FAST_REFRESH:function(){return d},ACTION_NAVIGATE:function(){return i},ACTION_PREFETCH:function(){return s},ACTION_REFRESH:function(){return a},ACTION_RESTORE:function(){return u},ACTION_SERVER_ACTION:function(){return f},ACTION_SERVER_PATCH:function(){return c},PrefetchCacheEntryStatus:function(){return r},PrefetchKind:function(){return n},isThenable:function(){return p}});let a="refresh",i="navigate",u="restore",c="server-patch",s="prefetch",d="fast-refresh",f="server-action";function p(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(l=n||(n={})).AUTO="auto",l.FULL="full",l.TEMPORARY="temporary",(o=r||(r={})).fresh="fresh",o.reusable="reusable",o.expired="expired",o.stale="stale",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7195:function(e,t,n){"use strict";function r(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}}),n(8337),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let r=n(8754),l=n(5893),o=r._(n(7294)),a=n(6075),i=n(3955),u=n(8041),c=n(9903),s=n(5490),d=n(1928),f=n(257),p=n(4229),h=n(7195),g=n(9470),m=n(8199),v=new Set;function y(e,t,n,r,l,o){if(o||(0,i.isLocalURL)(t)){if(!r.bypassPrefetchedCheck){let l=t+"%"+n+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(v.has(l))return;v.add(l)}(async()=>o?e.prefetch(t,l):e.prefetch(t,n,r))().catch(e=>{})}}function b(e){return"string"==typeof e?e:(0,u.formatUrl)(e)}let x=o.default.forwardRef(function(e,t){let n,r;let{href:u,as:v,children:x,prefetch:_=null,passHref:w,replace:j,shallow:C,scroll:R,locale:E,onClick:O,onMouseEnter:P,onTouchStart:N,legacyBehavior:M=!1,...T}=e;n=x,M&&("string"==typeof n||"number"==typeof n)&&(n=(0,l.jsx)("a",{children:n}));let k=o.default.useContext(d.RouterContext),A=o.default.useContext(f.AppRouterContext),I=null!=k?k:A,L=!k,S=!1!==_,U=null===_?m.PrefetchKind.AUTO:m.PrefetchKind.FULL,{href:F,as:B}=o.default.useMemo(()=>{if(!k){let e=b(u);return{href:e,as:v?b(v):e}}let[e,t]=(0,a.resolveHref)(k,u,!0);return{href:e,as:v?(0,a.resolveHref)(k,v):t||e}},[k,u,v]),K=o.default.useRef(F),D=o.default.useRef(B);M&&(r=o.default.Children.only(n));let H=M?r&&"object"==typeof r&&r.ref:t,[V,X,q]=(0,p.useIntersection)({rootMargin:"200px"}),z=o.default.useCallback(e=>{(D.current!==B||K.current!==F)&&(q(),D.current=B,K.current=F),V(e),H&&("function"==typeof H?H(e):"object"==typeof H&&(H.current=e))},[B,H,F,q,V]);o.default.useEffect(()=>{I&&X&&S&&y(I,F,B,{locale:E},{kind:U},L)},[B,F,X,E,S,null==k?void 0:k.locale,I,L,U]);let G={ref:z,onClick(e){M||"function"!=typeof O||O(e),M&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),I&&!e.defaultPrevented&&function(e,t,n,r,l,a,u,c,s){let{nodeName:d}=e.currentTarget;if("A"===d.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!s&&!(0,i.isLocalURL)(n)))return;e.preventDefault();let f=()=>{let e=null==u||u;"beforePopState"in t?t[l?"replace":"push"](n,r,{shallow:a,locale:c,scroll:e}):t[l?"replace":"push"](r||n,{scroll:e})};s?o.default.startTransition(f):f()}(e,I,F,B,j,C,R,E,L)},onMouseEnter(e){M||"function"!=typeof P||P(e),M&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),I&&(S||!L)&&y(I,F,B,{locale:E,priority:!0,bypassPrefetchedCheck:!0},{kind:U},L)},onTouchStart:function(e){M||"function"!=typeof N||N(e),M&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),I&&(S||!L)&&y(I,F,B,{locale:E,priority:!0,bypassPrefetchedCheck:!0},{kind:U},L)}};if((0,c.isAbsoluteUrl)(B))G.href=B;else if(!M||w||"a"===r.type&&!("href"in r.props)){let e=void 0!==E?E:null==k?void 0:k.locale,t=(null==k?void 0:k.isLocaleDomain)&&(0,h.getDomainLocale)(B,e,null==k?void 0:k.locales,null==k?void 0:k.domainLocales);G.href=t||(0,g.addBasePath)((0,s.addLocale)(B,e,null==k?void 0:k.defaultLocale))}return M?o.default.cloneElement(r,G):(0,l.jsx)("a",{...T,...G,children:n})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return u}});let r=n(7294),l=n(4474),o="function"==typeof IntersectionObserver,a=new Map,i=[];function u(e){let{rootRef:t,rootMargin:n,disabled:u}=e,c=u||!o,[s,d]=(0,r.useState)(!1),f=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{f.current=e},[]);return(0,r.useEffect)(()=>{if(o){if(c||s)return;let e=f.current;if(e&&e.tagName)return function(e,t,n){let{id:r,observer:l,elements:o}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=i.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=a.get(r)))return t;let l=new Map;return t={id:n,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=l.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e),elements:l},i.push(n),a.set(n,t),t}(n);return o.set(e,t),l.observe(e),function(){if(o.delete(e),l.unobserve(e),0===o.size){l.disconnect(),a.delete(r);let e=i.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&i.splice(e,1)}}}(e,e=>e&&d(e),{root:null==t?void 0:t.current,rootMargin:n})}else if(!s){let e=(0,l.requestIdleCallback)(()=>d(!0));return()=>(0,l.cancelIdleCallback)(e)}},[c,n,t,s,f.current]),[p,s,(0,r.useCallback)(()=>{d(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1854:function(e,t,n){"use strict";n.r(t);var r=n(5893),l=n(7294),o=n(1664),a=n.n(o),i=n(1163);t.default=()=>{let{basePath:e}=(0,i.useRouter)(),t=t=>{let n=t.startsWith("/")?t:"/".concat(t);return"".concat(null!=e?e:"").concat(n)},[n,o]=(0,l.useState)(!1),[u,c]=(0,l.useState)(""),[s,d]=(0,l.useState)(""),[f,p]=(0,l.useState)(!1),h=(0,l.useRef)(null),g=(0,l.useRef)(null),m=(0,l.useRef)(null),v=(0,l.useRef)(null),y=(0,l.useRef)(null),b=e=>new Promise((t,n)=>{let r=new Image;r.crossOrigin="anonymous",r.decoding="async",r.onload=()=>t(r),r.onerror=()=>n(Error("invitation image failed to load")),r.src=e}),x=async()=>{if(!f){p(!0);try{var e,n,r,l;let o;let a=null!==(r=h.current)&&void 0!==r?r:document.createElement("canvas");h.current||(h.current=a);let i=a.getContext("2d");if(!i)throw Error("캔버스 컨텍스트를 초기화할 수 없습니다.");if(null===(e=document.fonts)||void 0===e?void 0:e.ready)try{await document.fonts.ready}catch(e){}if(null===(n=document.fonts)||void 0===n?void 0:n.load)try{await Promise.all([document.fonts.load("700 48px rixdongnimgothic-pro"),document.fonts.load("700 48px 'rixdongnimgothic-pro'"),document.fonts.load("700 48px 'tk-rixdongnimgothic-pro'")])}catch(e){}let c=await b(t("/invitation_2.png"));a.width=c.width,a.height=c.height,i.clearRect(0,0,a.width,a.height),i.drawImage(c,0,0);let d=u.trim(),f=s.trim(),p=e=>{let t=m.current;if(!t||!e)return null;let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();if(0===n.width||0===n.height)return null;let l=r.left+r.width/2-n.left,o=r.top+r.height/2-n.top;return{x:l/n.width*a.width,y:o/n.height*a.height}},x=function(e,t){var n,r;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e)return;let u=Math.round(a.height*t),c=.6*a.width,s=Math.round(46*a.width/1024);s=Math.max(28,Math.min(52,s));let d='"rixdongnimgothic-pro","tk-rixdongnimgothic-pro",sans-serif';i.textAlign="center",i.textBaseline="middle",i.fillStyle="#121212";let f=t=>(i.font="700 ".concat(t,"px ").concat(d),i.measureText(e).width),h=f(s);for(;h>c&&s>24;)s-=2,h=f(s);i.font="700 ".concat(s,"px ").concat(d);let g=p(o),m=null!==(n=null==g?void 0:g.x)&&void 0!==n?n:a.width/2+l,v=null!==(r=null==g?void 0:g.y)&&void 0!==r?r:u;i.fillText(e,m,v)};if((d||f)&&(x(d,.12431693989071038,-25,v.current),x(f,.5628415300546448,50,y.current)),!g.current)throw Error("다운로드 링크가 준비되지 않았습니다.");let _="invitation-from-".concat(encodeURIComponent(f||"unknown"),"-to-").concat(encodeURIComponent(d||"guest"),".png"),w=null,j=null;if(a.toBlob)w=await new Promise(e=>a.toBlob(e,"image/png"));else{let e=a.toDataURL("image/png");j=e;let t=e.indexOf(","),n=t>-1?e.slice(5,e.indexOf(";")):"image/png",r=atob(t>-1?e.slice(t+1):e),l=new ArrayBuffer(r.length),o=new Uint8Array(l);for(let e=0;e<r.length;e+=1)o[e]=r.charCodeAt(e);w=new Blob([o],{type:n})}if(!w)throw Error("초대장 이미지를 생성하지 못했습니다.");let C="undefined"!=typeof navigator?navigator:void 0,R=j;if(!R){let e=URL.createObjectURL(w);R=e,o=()=>URL.revokeObjectURL(e)}let E=((e,t)=>{let n=g.current,r=(()=>{if("undefined"==typeof document)return!1;let e=document.createElement("a");return"download"in e})(),l="undefined"!=typeof navigator&&/iP(ad|hone|od)/i.test(navigator.userAgent);if(!l&&r&&n)return n.href=e,n.download=_,n.click(),n.removeAttribute("download"),n.removeAttribute("href"),null==t||t(),!0;let o=document.createElement("a");return o.href=e,o.download=_,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),t&&window.setTimeout(t,1500),!l})(R,o),O="undefined"!=typeof navigator&&/iP(ad|hone|od)/i.test(navigator.userAgent);if(!E&&O&&(null==C?void 0:C.share)&&C.canShare){let e={title:f?"".concat(f,"의 초대장"):"초대장",text:d?"".concat(d," 님께 전달하는 초대장입니다."):void 0,files:[new File([w],_,{type:"image/png"})]};if(C.canShare({files:null!==(l=e.files)&&void 0!==l?l:[]}))try{await C.share(e)}catch(e){console.warn("초대장 공유에 실패했습니다.",e)}}}catch(e){console.error(e),window.alert("초대장을 저장하지 못했습니다. 다시 시도해 주세요.")}finally{p(!1)}}},_=(0,l.useMemo)(()=>({top:"".concat(12.431693989071038,"%"),left:"calc(50% ".concat("-"," ").concat(Math.abs(-25),"px)")}),[]),w=(0,l.useMemo)(()=>({top:"".concat(56.284153005464475,"%"),left:"calc(50% ".concat("+"," ").concat(Math.abs(50),"px)")}),[]);return(0,r.jsx)("main",{className:"landing",children:(0,r.jsxs)("div",{className:"landing-wrapper",children:[(0,r.jsxs)("div",{className:"landing-card".concat(n?" landing-card--result":""),"aria-live":n?"polite":"off","aria-label":n?"완성된 초대장 미리보기":"초대장 작성 입력 영역",ref:m,children:[(0,r.jsx)("img",{src:t("/invitation_2.png"),alt:"졸업전시 초대장 배경 이미지",className:"landing-card__image"}),n?(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)("span",{className:"landing-result-text landing-result-text--to",style:_,"aria-label":"초대 받는 분",ref:v,children:u}),s&&(0,r.jsx)("span",{className:"landing-result-text landing-result-text--from",style:w,"aria-label":"초대 보내는 분",ref:y,children:s})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{className:"landing-field landing-field--to",htmlFor:"landing-to-input",children:[!u&&(0,r.jsx)("img",{src:t("/write.png"),alt:"",className:"landing-placeholder landing-placeholder--to"}),(0,r.jsx)("input",{id:"landing-to-input",className:"landing-input",placeholder:"(입력하세요)",maxLength:20,value:u,onChange:e=>c(e.target.value)})]}),(0,r.jsxs)("label",{className:"landing-field landing-field--from",htmlFor:"landing-from-input",children:[!s&&(0,r.jsx)("img",{src:t("/write.png"),alt:"",className:"landing-placeholder landing-placeholder--from"}),(0,r.jsx)("input",{id:"landing-from-input",className:"landing-input",placeholder:"(입력하세요)",maxLength:20,value:s,onChange:e=>d(e.target.value)})]})]})]}),n?(0,r.jsxs)("div",{className:"landing-result-actions",children:[(0,r.jsx)("button",{type:"button",className:"landing-result-action",onClick:x,disabled:f,"aria-label":f?"초대장 저장 중":"초대장 저장하기",children:(0,r.jsx)("img",{src:t("/save.svg"),alt:""})}),(0,r.jsx)("button",{type:"button",className:"landing-result-action landing-result-action--retry",onClick:()=>{p(!1),o(!1),c(""),d("")},"aria-label":"이름 다시 입력하기",children:(0,r.jsx)("img",{src:t("/retry.svg"),alt:""})})]}):(0,r.jsx)(a(),{href:"/generator",className:"landing-button",prefetch:!1,"aria-label":"초대장 만들기 페이지로 이동",onClick:e=>{n||(e.preventDefault(),o(!0))},children:(0,r.jsx)("img",{src:t("/button_1.svg"),alt:"초대장 만들기 이동 버튼"})}),(0,r.jsx)("a",{ref:g,style:{display:"none"},"aria-hidden":"true"})]})})}},1664:function(e,t,n){e.exports=n(8342)},1163:function(e,t,n){e.exports=n(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);