(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{2329:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/generator",function(){return n(6695)}])},7557:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294);t.default=e=>{let{from:t,to:n,canvasRef:l,onReset:r}=e,[o,s]=(0,i.useState)(!1),c=(0,i.useRef)(null),d=async()=>{let e=l.current;if(!e)return;s(!0);let a=t.trim(),i=n.trim(),r="invitation-from-".concat(encodeURIComponent(a||"unknown"),"-to-").concat(encodeURIComponent(i||"guest"),".png");try{let t,n=null,l=null;if(e.toBlob&&(n=await new Promise(t=>e.toBlob(t,"image/png"))),!n){let t=e.toDataURL("image/png");l=t;let a=t.indexOf(","),i=a>-1?t.slice(5,t.indexOf(";")):"image/png",r=atob(a>-1?t.slice(a+1):t),o=new ArrayBuffer(r.length),s=new Uint8Array(o);for(let e=0;e<r.length;e+=1)s[e]=r.charCodeAt(e);n=new Blob([s],{type:i})}if(!n)throw Error("초대장 이미지를 생성하지 못했습니다.");let s="undefined"!=typeof navigator?navigator:void 0,u="undefined"!=typeof navigator?navigator.userAgent:"",h=/iP(ad|hone|od)/i.test(u),m=/Android/i.test(u),f={title:a?"".concat(a,"의 초대장"):"초대장",text:i?"".concat(i," 님께 전달하는 초대장입니다."):"초대장을 함께 확인해 주세요."};if("undefined"!=typeof File)try{f.files=[new File([n],r,{type:"image/png"})]}catch(e){}let g=!!(null==s?void 0:s.share),x=(()=>{var e;if(!g||!s||!(null===(e=f.files)||void 0===e?void 0:e.length))return!1;if("function"!=typeof s.canShare)return!0;try{return s.canShare({files:f.files})}catch(e){return!1}})(),p=async e=>{if(!(null==s?void 0:s.share))return!1;try{return await s.share(e),!0}catch(e){return console.warn("초대장 공유에 실패했습니다.",e),!1}},v=!1;if(g&&(h||m)&&(null==s?void 0:s.share)&&(f.files&&x&&(v=await p(f)),!v)){var o,d;let e={title:f.title,text:null!==(d=null!==(o=f.text)&&void 0!==o?o:f.title)&&void 0!==d?d:"초대장을 함께 확인해 주세요."};v=await p(e)}let w=l;if(!w){let e=URL.createObjectURL(n);w=e,t=()=>URL.revokeObjectURL(e)}if(v){null==t||t();return}((e,t)=>{let n=c.current,a=null!=n?n:document.createElement("a"),i=!n;a.href=e,a.download=r,i&&(a.style.display="none",document.body.appendChild(a)),a.click(),window.requestAnimationFrame(()=>{a.removeAttribute("href"),a.removeAttribute("download"),null==t||t(),i&&a.remove()})})(w,t)}catch(e){console.error(e),window.alert("초대장을 저장하지 못했습니다. 다시 시도해 주세요.")}finally{s(!1)}};return(0,a.jsxs)("div",{className:"download-actions",children:[(0,a.jsx)("button",{className:"btn btn-save".concat(o?" btn-disabled":""),type:"button",disabled:o,onClick:d,children:o?"저장 중...":"저장하기"}),(0,a.jsx)("button",{className:"btn btn-retry",type:"button",onClick:()=>{s(!1),r()},children:"다시하기"}),(0,a.jsx)("a",{ref:c,style:{display:"none"}})]})}},1943:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294),l=n(1163);let r='"rixdongnimgothic-pro","tk-rixdongnimgothic-pro",sans-serif',o={weight:700,minSize:48,maxSize:900,targetWidthRatio:.92,manualSize:0},s={weight:700,minSize:48,maxSize:820,targetWidthRatio:.92,manualSize:0};t.default=e=>{let{from:t,to:n,canvasRef:c,className:d,imageSrc:u="/invitation_2.svg",fontOptions:h}=e,{basePath:m}=(0,l.useRouter)(),f=(0,i.useCallback)(e=>{let t=e.startsWith("/")?e:"/".concat(e);return"".concat(null!=m?m:"").concat(t)},[m]),g=(0,i.useMemo)(()=>({to:{...o,...null==h?void 0:h.to},from:{...s,...null==h?void 0:h.from}}),[h]),[x,p]=(0,i.useState)(!1),[v,w]=(0,i.useState)(null),[j,b]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=!0;p(!1),w(null);let t=new Image;return t.crossOrigin="anonymous",t.onload=()=>{e&&(b(t),w(null))},t.onerror=()=>{e&&(b(null),p(!1),w("초대장 이미지를 불러오지 못했습니다."))},(async()=>{var e;if(document.fonts&&"ready"in document.fonts)try{await document.fonts.ready}catch(e){}if(null===(e=document.fonts)||void 0===e?void 0:e.load)try{let e=Array.from(new Set([g.to.weight,g.from.weight]));await Promise.all(e.flatMap(e=>[document.fonts.load("".concat(e," ").concat(36,"px rixdongnimgothic-pro")),document.fonts.load("".concat(e," ").concat(36,"px 'rixdongnimgothic-pro'")),document.fonts.load("".concat(e," ").concat(36,"px 'tk-rixdongnimgothic-pro'"))]))}catch(e){}})().finally(()=>{t.src=f(u)}),()=>{e=!1}},[f,u,g]),(0,i.useEffect)(()=>{let e=c.current,a=null==e?void 0:e.getContext("2d");if(!e||!a||!j)return;let i=()=>{let i=(t,n,i,l)=>{let o=t.trim();if(!o)return;let s=Math.round(e.height*n),c=Math.min(.98*e.width,e.width*l.targetWidthRatio),d=(e,t)=>{a.font="".concat(t," ").concat(e,"px ").concat(r);let n=a.measureText(o);return n.actualBoundingBoxRight-n.actualBoundingBoxLeft||n.width},u=l.manualSize>0?Math.max(l.minSize,Math.min(l.maxSize,Math.round(l.manualSize*(e.width/1024)))):l.minSize;if(l.manualSize<=0){let e=l.minSize,t=Math.max(l.minSize,l.maxSize),n=l.minSize;for(;e<=t;){let a=Math.floor((e+t)/2);d(a,l.weight)<=c?(n=a,e=a+2):t=a-2}u=Math.min(n,l.maxSize)}a.font="".concat(l.weight," ").concat(u,"px ").concat(r),a.textAlign="center",a.textBaseline="middle",a.fillStyle="#121212";let h=e.width/2+i;a.fillText(o,h,s)};a.imageSmoothingEnabled=!0,void 0!==a.imageSmoothingQuality&&(a.imageSmoothingQuality="high"),a.drawImage(j,0,0,e.width,e.height),i(n,.12021857923497267,-90,g.to),i(t,.5591985428051002,125,g.from)},l=null,o=()=>{let t=e.getBoundingClientRect(),n=Math.max(1,window.devicePixelRatio||1),l=t.width||j.width,r=Math.max(768,Math.min(j.naturalWidth&&Number.isFinite(j.naturalWidth)?Math.max(768,Math.min(3072,j.naturalWidth)):3072,Math.round(l*n*3)||768)),o=Math.max(1,Math.round(r*(j.naturalHeight&&j.naturalWidth?j.naturalHeight/j.naturalWidth:1.4296875)));(e.width!==r||e.height!==o)&&(e.width=r,e.height=o);let s=t.width||r/n,c=o/r*s;e.style.width="".concat(s,"px"),e.style.height="".concat(c,"px"),a.clearRect(0,0,e.width,e.height),i(),p(!0),w(null)};o();let s="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>{l&&cancelAnimationFrame(l),l=window.requestAnimationFrame(o)}):null;null==s||s.observe(e);let d=()=>{l&&cancelAnimationFrame(l),l=window.requestAnimationFrame(o)};return window.addEventListener("resize",d),()=>{null==s||s.disconnect(),l&&cancelAnimationFrame(l),window.removeEventListener("resize",d)}},[c,t,n,j,g]),(0,a.jsxs)("div",{className:"invitation-wrapper",children:[!x&&(0,a.jsx)("div",{className:"canvas-status",children:null!=v?v:"초대장 이미지를 불러오는 중입니다..."}),(0,a.jsx)("canvas",{ref:c,className:null!=d?d:"invitation-canvas"})]})}},6695:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294),l=n(1943),r=n(7557);t.default=()=>{let[e,t]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[s,c]=(0,i.useState)(!1),d=(0,i.useRef)(null),u=(0,i.useMemo)(()=>({to:{weight:400,manualSize:1200},from:{weight:400,manualSize:1200}}),[]),h=(0,i.useMemo)(()=>e.trim().length>0&&n.trim().length>0,[e,n]);return(0,a.jsx)("main",{className:"generator",children:(0,a.jsxs)("div",{className:"generator-shell",children:[(0,a.jsxs)("div",{className:"generator-confetti",children:[(0,a.jsx)("span",{className:"mint"}),(0,a.jsx)("span",{className:"sun"}),(0,a.jsx)("span",{className:"sky"})]}),(0,a.jsxs)("div",{className:"generator-body",children:[(0,a.jsxs)("header",{className:"generator-header",children:[(0,a.jsx)("p",{children:"상명대학교 디자인대학"}),(0,a.jsxs)("h1",{children:["커뮤니케이션디자인전공",(0,a.jsx)("br",{}),"제38회 졸업전시회"]}),(0,a.jsx)("span",{children:"[ Invitation Card ]"})]}),!s&&(0,a.jsxs)("form",{className:"generator-form",onSubmit:e=>{e.preventDefault(),h&&c(!0)},children:[(0,a.jsxs)("div",{className:"generator-fields",children:[(0,a.jsxs)("label",{className:"generator-field",children:[(0,a.jsx)("span",{className:"generator-field-label",children:"초대장을 받는 분"}),(0,a.jsxs)("div",{className:"generator-field-content",children:[(0,a.jsx)("span",{className:"generator-field-title",children:"To."}),(0,a.jsx)("input",{className:"generator-input",maxLength:20,placeholder:"(입력하세요)",value:n,onChange:e=>o(e.target.value)})]})]}),(0,a.jsxs)("label",{className:"generator-field",children:[(0,a.jsx)("span",{className:"generator-field-label",children:"초대장을 보내는 분"}),(0,a.jsxs)("div",{className:"generator-field-content",children:[(0,a.jsx)("span",{className:"generator-field-title",children:"From."}),(0,a.jsx)("input",{className:"generator-input",maxLength:20,placeholder:"(입력하세요)",value:e,onChange:e=>t(e.target.value)})]})]})]}),(0,a.jsxs)("button",{className:"btn btn-primary btn-create".concat(h?"":" btn-disabled"),type:"submit",disabled:!h,children:["초대장 만들기 ",(0,a.jsx)("span",{className:"arrow",children:"➜"})]})]}),s&&(0,a.jsxs)("section",{className:"generator-preview",children:[(0,a.jsxs)("article",{className:"preview-card",children:[(0,a.jsxs)("div",{className:"preview-text",children:[(0,a.jsx)("p",{className:"preview-label",children:"To."}),(0,a.jsx)("p",{children:"2025학년도 상명대학교 디자인대학 커뮤니케이션디자인전공 졸업전시회에 초대합니다."})]}),(0,a.jsx)(l.default,{from:e,to:n,canvasRef:d,className:"preview-canvas",fontOptions:u,imageSrc:"/invitation_2.png"}),(0,a.jsxs)("div",{className:"preview-details",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"From."})," ",e]}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"2025.11.14(fri) - 11.18(tue)"})}),(0,a.jsx)("p",{children:"더 서울라이티움 제1전시장"}),(0,a.jsx)("p",{children:"Opening | 11.14 17:00"}),(0,a.jsx)("p",{children:"관람시간 | 평일 17:00 - 19:00, 토\xb7일 11:00 - 19:00"})]})]}),(0,a.jsx)(r.default,{from:e,to:n,canvasRef:d,onReset:()=>{t(""),o(""),c(!1);let e=d.current,n=null==e?void 0:e.getContext("2d");e&&n&&n.clearRect(0,0,e.width,e.height)}})]})]}),(0,a.jsxs)("footer",{className:"generator-footer",children:[(0,a.jsx)("p",{children:"@smucd2025"}),(0,a.jsx)("p",{children:"smucd2025.com"})]})]})})}},1163:function(e,t,n){e.exports=n(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2329)}),_N_E=e.O()}]);