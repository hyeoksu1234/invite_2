(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{732:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/InvitationCanvas",function(){return e(1943)}])},1943:function(t,n,e){"use strict";e.r(n);var i=e(5893),a=e(7294),o=e(1163);let l='"rixdongnimgothic-pro","tk-rixdongnimgothic-pro",sans-serif';n.default=t=>{let{from:n,to:e,canvasRef:r,className:c,imageSrc:u="/invitation_2.svg"}=t,{basePath:d}=(0,o.useRouter)(),s=(0,a.useCallback)(t=>{let n=t.startsWith("/")?t:"/".concat(t);return"".concat(null!=d?d:"").concat(n)},[d]),[h,m]=(0,a.useState)(!1),[f,w]=(0,a.useState)(null),[g,x]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t=!0;m(!1),w(null);let n=new Image;return n.crossOrigin="anonymous",n.onload=()=>{t&&(x(n),w(null))},n.onerror=()=>{t&&(x(null),m(!1),w("초대장 이미지를 불러오지 못했습니다."))},(async()=>{var t;if(document.fonts&&"ready"in document.fonts)try{await document.fonts.ready}catch(t){}if(null===(t=document.fonts)||void 0===t?void 0:t.load)try{await Promise.all([document.fonts.load("700 36px rixdongnimgothic-pro"),document.fonts.load("700 36px 'rixdongnimgothic-pro'"),document.fonts.load("700 36px 'tk-rixdongnimgothic-pro'")])}catch(t){}})().finally(()=>{n.src=s(u)}),()=>{t=!1}},[s,u]),(0,a.useEffect)(()=>{let t=r.current,i=null==t?void 0:t.getContext("2d");if(!t||!i||!g)return;let a=()=>{let a=function(n,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.82,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:900,c=n.trim();if(!c)return;let u=Math.round(t.height*e),d=Math.min(.98*t.width,t.width*o),s=t=>{i.font="700 ".concat(t,"px ").concat(l);let n=i.measureText(c);return n.actualBoundingBoxRight-n.actualBoundingBoxLeft||n.width},h=48,m=Math.max(48,r),f=48;for(;h<=m;){let t=Math.floor((h+m)/2);s(t)<=d?(f=t,h=t+2):m=t-2}let w=Math.min(f,r);i.font="700 ".concat(w,"px ").concat(l),i.textAlign="center",i.textBaseline="middle",i.fillStyle="#121212";let g=t.width/2+a;i.fillText(c,g,u)};i.drawImage(g,0,0,t.width,t.height),a(e,.12431693989071038,-25,.94,900),a(n,.5628415300546448,50,.9,820)},o=null,c=()=>{let n=t.getBoundingClientRect(),e=Math.max(1,window.devicePixelRatio||1),o=Math.max(1024,Math.min(1024,Math.round((n.width||g.width)*e)||1024)),l=Math.max(1,Math.round(o*(g.naturalHeight&&g.naturalWidth?g.naturalHeight/g.naturalWidth:1.4296875)));(t.width!==o||t.height!==l)&&(t.width=o,t.height=l);let r=n.width||o/e,c=l/o*r;t.style.width="".concat(r,"px"),t.style.height="".concat(c,"px"),i.clearRect(0,0,t.width,t.height),a(),m(!0),w(null)};c();let u="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>{o&&cancelAnimationFrame(o),o=window.requestAnimationFrame(c)}):null;null==u||u.observe(t);let d=()=>{o&&cancelAnimationFrame(o),o=window.requestAnimationFrame(c)};return window.addEventListener("resize",d),()=>{null==u||u.disconnect(),o&&cancelAnimationFrame(o),window.removeEventListener("resize",d)}},[r,n,e,g]),(0,i.jsxs)("div",{className:"invitation-wrapper",children:[!h&&(0,i.jsx)("div",{className:"canvas-status",children:null!=f?f:"초대장 이미지를 불러오는 중입니다..."}),(0,i.jsx)("canvas",{ref:r,className:null!=c?c:"invitation-canvas"})]})}},1163:function(t,n,e){t.exports=e(3079)}},function(t){t.O(0,[888,774,179],function(){return t(t.s=732)}),_N_E=t.O()}]);