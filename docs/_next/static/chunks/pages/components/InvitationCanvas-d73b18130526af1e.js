(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{732:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/InvitationCanvas",function(){return e(1943)}])},1943:function(t,n,e){"use strict";e.r(n);var o=e(5893),i=e(7294),a=e(1163);let r='"rixdongnimgothic-pro","tk-rixdongnimgothic-pro",sans-serif';n.default=t=>{let{from:n,to:e,canvasRef:c,className:l}=t,{basePath:s}=(0,a.useRouter)(),u=(0,i.useCallback)(t=>{let n=t.startsWith("/")?t:"/".concat(t);return"".concat(null!=s?s:"").concat(n)},[s]),[d,h]=(0,i.useState)(!1),[f,m]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let t=!0,o=c.current,i=null==o?void 0:o.getContext("2d");if(!o||!i)return;h(!1),m(null);let a=new Image;return a.crossOrigin="anonymous",a.onload=()=>{if(!t)return;o.width=a.width,o.height=a.height,i.clearRect(0,0,o.width,o.height),i.drawImage(a,0,0);let c=function(t,n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.trim();if(!a)return;let c=Math.round(o.height*n),l=.6*o.width,s=Math.round(32*o.width/1024),u=t=>(i.font="700 ".concat(t,"px ").concat(r),i.measureText(a).width),d=u(s=Math.max(20,Math.min(40,s)));for(;d>l&&s>20;)s-=2,d=u(s);i.font="700 ".concat(s,"px ").concat(r),i.textAlign="center",i.textBaseline="middle",i.fillStyle="#121212";let h=o.width/2+e;i.fillText(a,h,c)};c(e,.12431693989071038,-25),c(n,.5628415300546448,50),h(!0),m(null)},a.onerror=()=>{t&&(h(!1),m("초대장 이미지를 불러오지 못했습니다."))},(async()=>{var t;if(document.fonts&&"ready"in document.fonts&&await document.fonts.ready,null===(t=document.fonts)||void 0===t?void 0:t.load)try{await Promise.all([document.fonts.load("700 36px rixdongnimgothic-pro"),document.fonts.load("700 36px 'rixdongnimgothic-pro'"),document.fonts.load("700 36px 'tk-rixdongnimgothic-pro'")])}catch(t){}a.src=u("/result.png")})(),()=>{t=!1}},[u,n,e,c]),(0,o.jsxs)("div",{className:"invitation-wrapper",children:[!d&&(0,o.jsx)("div",{className:"canvas-status",children:null!=f?f:"초대장 이미지를 불러오는 중입니다..."}),(0,o.jsx)("canvas",{ref:c,className:null!=l?l:"invitation-canvas"})]})}},1163:function(t,n,e){t.exports=e(3079)}},function(t){t.O(0,[888,774,179],function(){return t(t.s=732)}),_N_E=t.O()}]);