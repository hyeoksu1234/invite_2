(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{1321:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/DownloadButton",function(){return n(7557)}])},7557:function(e,t,n){"use strict";n.r(t);var o=n(5893),i=n(7294);t.default=e=>{let{from:t,to:n,canvasRef:r,onReset:l}=e,[a,c]=(0,i.useState)(!1),u=(0,i.useRef)(null),d=async()=>{let e=r.current;if(!e)return;c(!0);let o=t.trim(),i=n.trim(),l="invitation-from-".concat(encodeURIComponent(o||"unknown"),"-to-").concat(encodeURIComponent(i||"guest"),".png");try{let t,n=null,r=null;if(e.toBlob&&(n=await new Promise(t=>e.toBlob(t,"image/png"))),!n){let t=e.toDataURL("image/png");r=t;let o=t.indexOf(","),i=o>-1?t.slice(5,t.indexOf(";")):"image/png",l=atob(o>-1?t.slice(o+1):t),a=new ArrayBuffer(l.length),c=new Uint8Array(a);for(let e=0;e<l.length;e+=1)c[e]=l.charCodeAt(e);n=new Blob([c],{type:i})}if(!n)throw Error("초대장 이미지를 생성하지 못했습니다.");let c="undefined"!=typeof navigator?navigator:void 0,s="undefined"!=typeof navigator?navigator.userAgent:"",f=/iP(ad|hone|od)/i.test(s),h=/Android/i.test(s),w={title:o?"".concat(o,"의 초대장"):"초대장",text:i?"".concat(i," 님께 전달하는 초대장입니다."):"초대장을 함께 확인해 주세요."};if("undefined"!=typeof File)try{w.files=[new File([n],l,{type:"image/png"})]}catch(e){}let p=!!(null==c?void 0:c.share),y=(()=>{var e;if(!p||!c||!(null===(e=w.files)||void 0===e?void 0:e.length))return!1;if("function"!=typeof c.canShare)return!0;try{return c.canShare({files:w.files})}catch(e){return!1}})(),b=async e=>{if(!(null==c?void 0:c.share))return!1;try{return await c.share(e),!0}catch(e){return console.warn("초대장 공유에 실패했습니다.",e),!1}},m=!1;if(p&&(f||h)&&(null==c?void 0:c.share)&&(w.files&&y&&(m=await b(w)),!m)){var a,d;let e={title:w.title,text:null!==(d=null!==(a=w.text)&&void 0!==a?a:w.title)&&void 0!==d?d:"초대장을 함께 확인해 주세요."};m=await b(e)}let v=r;if(!v){let e=URL.createObjectURL(n);v=e,t=()=>URL.revokeObjectURL(e)}if(m){null==t||t();return}((e,t)=>{let n=u.current,o=null!=n?n:document.createElement("a"),i=!n;o.href=e,o.download=l,i&&(o.style.display="none",document.body.appendChild(o)),o.click(),window.requestAnimationFrame(()=>{o.removeAttribute("href"),o.removeAttribute("download"),null==t||t(),i&&o.remove()})})(v,t)}catch(e){console.error(e),window.alert("초대장을 저장하지 못했습니다. 다시 시도해 주세요.")}finally{c(!1)}};return(0,o.jsxs)("div",{className:"download-actions",children:[(0,o.jsx)("button",{className:"btn btn-save".concat(a?" btn-disabled":""),type:"button",disabled:a,onClick:d,children:a?"저장 중...":"저장하기"}),(0,o.jsx)("button",{className:"btn btn-retry",type:"button",onClick:()=>{c(!1),l()},children:"다시하기"}),(0,o.jsx)("a",{ref:u,style:{display:"none"}})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1321)}),_N_E=e.O()}]);